define(["zepto","underscore"],function($,Lot){var domain="http://ygh.cp.360.cn",lottery={ssq:[220051,"\u53cc\u8272\u7403"],slt:[120029,"\u8d85\u7ea7\u5927\u4e50\u900f"],p3:[110033,"\u6392\u5217\u4e09"],p5:[110035,"\u6392\u5217\u4e94"],qxc:[110022,"\u4e03\u661f\u5f69"],sd:[210053,"\u798f\u5f693D"],sdbj:[215152,"\u5317\u4eac3D"],qlc:[220028,"\u4e03\u4e50\u5f69"],xw:[223515,"\u4e1c\u65b915\u90095"],xwtj:[225303,"\u5929\u6d2515\u90095"],jczq:[130042,"\u7ade\u5f69\u8db3\u7403"],jclq:[130043,"\u7ade\u5f69\u7bee\u7403"],dc:[130041,"\u5317\u4eac\u5355\u573a"],sfc:[130011,"\u80dc\u8d1f\u5f69"],rj:[130019,"\u4efb\u9009\u4e5d"],kl8:[265108,"\u5317\u4eac\u5feb\u4e508"],syxwsd:[166406,"\u5c71\u4e1c11\u90095"],syxwjx:[168009,"\u65b011\u90095"],syxwgd:[165707,"\u5e7f\u4e1c11\u90095"],syxwsh:[165207,"\u4e0a\u6d7711\u90095"],syxwhlj:[166507,"\u5e78\u8fd011\u90095"],sscjx:[258001,"\u6c5f\u897f\u65f6\u65f6\u5f69"],ssccq:[255401,"\u91cd\u5e86\u65f6\u65f6\u5f69"],k3js:[255903,"\u6c5f\u82cf\u5feb3"],k3hb:[257703
,"\u6e56\u5317\u5feb3"],k3nm:[257503,"\u5185\u8499\u5feb3"],k3jl:[258203,"\u5409\u6797\u5feb3"],pk3:[166407,"\u5c71\u4e1c\u5feb\u4e50\u6251\u514b3"],jq4:[130018,"\u56db\u573a\u8fdb\u7403"],zc6:[130016,"6\u573a\u534a\u5168\u573a"]},pay_url={bet:domain+"/int/bet/",team:domain+"/int/teambet/",join:domain+"/int/join/",trace:domain+"/int/trace/",pteam:domain+"/int/pteambet/"},string={compile:function(tpl,data){var reg;for(var p in data)reg=new RegExp("{"+p+"}","g"),tpl=tpl.replace(reg,data[p]);return tpl}},bet={get_lot_name:function(name){var by_name=/^[a-z\d]+$/gi.test(name),by_id=/^\d+$/.test(name),index=0;by_name||(index=by_id?1:2);var p_arr=[];for(var p in lottery){p_arr=[p].concat(lottery[p]);if(lottery[p][index].indexOf(name)>-1)break}return p_arr},get_pay_url:function(con){var refer={bet:"\u4ee3\u8d2d",team:"\u5408\u4e70",join:"\u8ba4\u8d2d",trace:"\u8ffd\u53f7",pteam:"\u5148\u53d1\u8d77"},p,url;for(p in refer)if(con.indexOf(p)>-1||con.indexOf(refer[p])>-1){url=pay_url[p];break}return url||!1
},get_cur_issue:function(param){var url=domain+"/int/qcurissue",id=param.id,cur_issue=param.cur_issue,freq=param.freq,ok_call=param.ok_call||function(){},fail_call=param.fail_call||function(){};$.ajax({url:url,type:"GET",data:{LotID:id},dataType:"json",async:cur_issue?!0:!1,success:function(data){data?cur_issue!=undefined&&cur_issue==data.issue?setTimeout(function(){get_cur_issue.call(null,id,cur_issue)},freq||3e3):ok_call.call(null,data):fail_call.call(null)},error:function(){fail_call.call(null)},timeout:1e3})}},cookie={set:function(options){var ck=[];ck.push(options.name+"="),options.value&&ck.push(options.encode?options.value:encodeURIComponent(options.value));if(options.expires){var d=new Date;d.setHours(0),d.setMinutes(0),d.setSeconds(0),d.setTime(d.getTime()+options.expires*864e5),ck.push(";expires="+d.toGMTString())}options.domain&&ck.push(";domain="+options.domain),ck.push(";path="+(options.path||"/")),options.secure&&ck.push(";secure"),document.cookie=ck.join("")},get:function(
name,encode){var m=document.cookie.match(new RegExp("(^| )"+name+"=([^;])*","gi")),v=m?m[0].split(name+"=")[1]:"";return encode?v:decodeURIComponent(v)}};return{string:string,bet:bet,cookie:cookie}});